<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin Login</title>
  <style>
    :root{
      --brand:#0f5ea6;
      --brand-dark:#0b4b85;
      --text:#1f2a37;
      --muted:#6b7280;
      --danger:#c62828;
      --card-border:#e8edf5;
      --field-border:#d6dbe6;
      --field-focus:#0f5ea6;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:24px;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 380px at 10% -10%, rgba(15,94,166,.16), transparent 60%),
        radial-gradient(760px 300px at 110% 110%, rgba(52,127,206,.14), transparent 60%),
        linear-gradient(180deg,#f5f7fb 0%, #eef2f8 100%);
      overflow:hidden;
      position:relative;
      isolation:isolate;
    }
    body::before,
    body::after{
      content:"";
      position:fixed;
      border-radius:999px;
      pointer-events:none;
      z-index:0;
      filter:blur(4px);
      opacity:.55;
      will-change:transform;
    }
    body::before{
      width:420px;
      height:420px;
      top:-120px;
      left:-100px;
      background:radial-gradient(circle at 35% 35%, rgba(15,94,166,.38), rgba(15,94,166,.1) 58%, transparent 72%);
      animation:bg-float-a 16s ease-in-out infinite;
    }
    body::after{
      width:520px;
      height:520px;
      right:-180px;
      bottom:-180px;
      background:radial-gradient(circle at 50% 45%, rgba(61,134,209,.35), rgba(61,134,209,.08) 62%, transparent 76%);
      animation:bg-float-b 19s ease-in-out infinite;
    }
    .bg-wave{
      position:fixed;
      inset:-18%;
      pointer-events:none;
      z-index:0;
      opacity:.24;
      background:
        radial-gradient(1300px 260px at 20% 26%, rgba(132,173,223,.28), transparent 70%),
        radial-gradient(1100px 240px at 75% 72%, rgba(109,166,230,.25), transparent 70%);
      animation:bg-wave 22s linear infinite;
    }
    .network-canvas{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      z-index:0;
      pointer-events:none;
      opacity:.95;
    }
    @keyframes bg-float-a{
      0%,100%{transform:translate(0,0) scale(1);}
      50%{transform:translate(34px,22px) scale(1.06);}
    }
    @keyframes bg-float-b{
      0%,100%{transform:translate(0,0) scale(1);}
      50%{transform:translate(-28px,-26px) scale(1.08);}
    }
    @keyframes bg-wave{
      0%{transform:translateX(0) translateY(0);}
      50%{transform:translateX(-2.5%) translateY(1.5%);}
      100%{transform:translateX(0) translateY(0);}
    }
    .card{
      position:relative;
      z-index:1;
      width:100%;
      max-width:460px;
      background:rgba(255,255,255,.92);
      -webkit-backdrop-filter:blur(6px);
      backdrop-filter:blur(6px);
      border:1px solid var(--card-border);
      border-radius:20px;
      padding:26px;
      box-shadow:0 22px 60px rgba(21,36,68,.12);
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      margin:0 0 4px;
      font-size:24px;
      font-weight:800;
      letter-spacing:.2px;
    }
    .brand-badge{
      width:34px;
      height:34px;
      border-radius:10px;
      display:grid;
      place-items:center;
      color:#fff;
      background:linear-gradient(135deg,var(--brand) 0%, #3d86d1 100%);
      box-shadow:0 8px 20px rgba(15,94,166,.3);
      font-size:16px;
      font-weight:900;
    }
    .sub{
      margin:0 0 16px;
      color:var(--muted);
      font-size:13px;
    }
    form{margin-top:8px;}
    label{
      display:block;
      font-size:13px;
      font-weight:700;
      margin:0 0 6px;
    }
    input{
      width:100%;
      padding:11px 12px;
      border:1px solid var(--field-border);
      border-radius:12px;
      margin:0 0 14px;
      background:#fff;
      transition:border-color .15s ease, box-shadow .15s ease;
    }
    input:focus{
      outline:none;
      border-color:var(--field-focus);
      box-shadow:0 0 0 3px rgba(15,94,166,.14);
    }
    button{
      width:100%;
      padding:12px 14px;
      border:0;
      border-radius:12px;
      background:linear-gradient(135deg,var(--brand) 0%, #2d78c3 100%);
      color:#fff;
      font-weight:800;
      cursor:pointer;
      transition:transform .06s ease, box-shadow .2s ease, background .2s ease;
    }
    button:hover{
      background:linear-gradient(135deg,var(--brand-dark) 0%, var(--brand) 100%);
      box-shadow:0 10px 24px rgba(15,94,166,.28);
    }
    button:active{transform:translateY(1px);}
    .err{
      margin:0 0 14px;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(198,40,40,.28);
      background:rgba(198,40,40,.06);
      color:var(--danger);
      font-size:13px;
      font-weight:600;
    }
    .hint{
      margin:14px 0 0;
      color:var(--muted);
      font-size:12px;
      text-align:center;
    }
    @media (prefers-reduced-motion: reduce){
      body::before,
      body::after,
      .bg-wave{animation:none;}
    }
  </style>
</head>
<body>
  <canvas id="networkCanvas" class="network-canvas" aria-hidden="true"></canvas>
  <div class="bg-wave" aria-hidden="true"></div>
  <div class="card">
    <h2 class="brand"><span class="brand-badge">E</span>EIHO Admin</h2>
    <p class="sub">后台管理系统登录</p>
    {% if error %}<div class="err">{{error}}</div>{% endif %}
    <form method="post" action="/admin/login" autocomplete="off">
      <label for="username">Username</label>
      <input id="username" name="username" value="" required placeholder="your name" title="用户名" autocomplete="off">
      <label for="password">Password</label>
      <input id="password" name="password" type="password" required placeholder="your password" title="密码" autocomplete="new-password">
      <button type="submit">Login</button>
    </form>
    <p class="hint">
      初期：admin / admin123（请你上线前修改）
    </p>
  </div>
  <script>
    (() => {
      const canvas = document.getElementById("networkCanvas");
      if (!canvas) return;
      const ctx = canvas.getContext("2d");
      if (!ctx) return;

      const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      const dpr = Math.min(window.devicePixelRatio || 1, 2);
      const state = {
        w: 0,
        h: 0,
        nodes: [],
        maxDist: 140,
        mouse: { x: -9999, y: -9999, active: false },
      };

      const resize = () => {
        state.w = window.innerWidth;
        state.h = window.innerHeight;
        canvas.width = Math.floor(state.w * dpr);
        canvas.height = Math.floor(state.h * dpr);
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        const density = Math.max(26, Math.floor((state.w * state.h) / 26000));
        state.nodes = Array.from({ length: density }, () => ({
          x: Math.random() * state.w,
          y: Math.random() * state.h,
          vx: (Math.random() - 0.5) * 0.55,
          vy: (Math.random() - 0.5) * 0.55,
          r: Math.random() * 1.8 + 0.8,
        }));
      };

      const onMove = (e) => {
        state.mouse.x = e.clientX;
        state.mouse.y = e.clientY;
        state.mouse.active = true;
      };
      const onLeave = () => {
        state.mouse.active = false;
      };

      const draw = () => {
        ctx.clearRect(0, 0, state.w, state.h);
        const nodes = state.nodes;
        const maxDist = state.maxDist;

        for (let i = 0; i < nodes.length; i++) {
          const n = nodes[i];
          if (!prefersReducedMotion) {
            n.x += n.vx;
            n.y += n.vy;
          }

          if (n.x < -20) n.x = state.w + 20;
          if (n.x > state.w + 20) n.x = -20;
          if (n.y < -20) n.y = state.h + 20;
          if (n.y > state.h + 20) n.y = -20;

          if (state.mouse.active) {
            const dxm = state.mouse.x - n.x;
            const dym = state.mouse.y - n.y;
            const dm = Math.hypot(dxm, dym);
            if (dm < 120 && dm > 0.001) {
              const pull = (120 - dm) / 120;
              n.x -= (dxm / dm) * pull * 0.6;
              n.y -= (dym / dm) * pull * 0.6;
            }
          }

          for (let j = i + 1; j < nodes.length; j++) {
            const m = nodes[j];
            const dx = n.x - m.x;
            const dy = n.y - m.y;
            const dist = Math.hypot(dx, dy);
            if (dist > maxDist) continue;
            const alpha = 1 - dist / maxDist;
            ctx.beginPath();
            ctx.moveTo(n.x, n.y);
            ctx.lineTo(m.x, m.y);
            ctx.strokeStyle = `rgba(64, 120, 190, ${0.16 * alpha})`;
            ctx.lineWidth = 1;
            ctx.stroke();
          }
        }

        for (const n of nodes) {
          ctx.beginPath();
          ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
          ctx.fillStyle = "rgba(31, 89, 160, 0.55)";
          ctx.fill();
          ctx.beginPath();
          ctx.arc(n.x, n.y, n.r + 1.8, 0, Math.PI * 2);
          ctx.fillStyle = "rgba(110, 164, 226, 0.08)";
          ctx.fill();
        }

        requestAnimationFrame(draw);
      };

      resize();
      window.addEventListener("resize", resize);
      window.addEventListener("mousemove", onMove);
      window.addEventListener("touchmove", (e) => {
        if (!e.touches || e.touches.length === 0) return;
        const t = e.touches[0];
        onMove({ clientX: t.clientX, clientY: t.clientY });
      }, { passive: true });
      window.addEventListener("mouseleave", onLeave);
      draw();
    })();
  </script>
</body>
</html>
